{
  "version": 1,
  "tasks": [
    {
      "id": "RQ-0094",
      "status": "todo",
      "title": "Add performance tests for TUI search results rendering",
      "priority": "low",
      "tags": [
        "tui",
        "performance",
        "tests"
      ],
      "scope": [
        "crates/tui/src/ui/screens/search.rs",
        "crates/tui/tests/app_tests.rs"
      ],
      "evidence": [
        "Virtualization IS implemented in search.rs:100-119 using sliding window pattern (skip/take on visible range)",
        "Pagination IS implemented in app.rs:386-406 (maybe_fetch_more_results loads more data when within 10 items of end)",
        "search_scroll_offset field exists (app.rs:177) for tracking visible region",
        "search_results stored as Vec<Value> (app.rs:176) to support scrolling without re-fetching",
        "No performance tests exist for rendering with large result sets (grep in crates/tui/tests/ shows zero matches for 'virtual|performance')",
        "No snapshot tests exist for virtual window scrolling behavior"
      ],
      "plan": [
        "Add performance test in crates/tui/tests/app_tests.rs: test_search_rendering_with_large_dataset() - verify rendering time with 10, 100, 1000, 10000 results",
        "Add snapshot test in crates/tui/tests/app_tests.rs: test_virtual_window_scrolling() - verify only visible results are rendered with various scroll offsets",
        "Add snapshot test: test_pagination_trigger() - verify LoadMoreSearchResults action triggers at correct threshold (within 10 items of end)",
        "Measure actual rendering time in tests using std::time::Instant to verify O(1) rendering cost regardless of total result count",
        "Run make ci to verify all tests pass"
      ],
      "notes": [
        "Core virtualization work is complete - search.rs already implements sliding window rendering (lines 101-119)",
        "Pagination is implemented with maybe_fetch_more_results() method (app.rs:386-406)",
        "Task evidence originally claimed virtualization didn't exist, but investigation reveals it was already implemented",
        "Remaining work is test coverage only, not implementation",
        "Storing all results in Vec<Value> is intentional design for scrolling without re-fetching",
        "Initial task scope was implementation work, but actual gap is test coverage for performance guarantees"
      ],
      "request": "scan finding",
      "created_at": "2026-01-24T21:00:00Z",
      "updated_at": "2026-01-25T23:30:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0095",
      "status": "todo",
      "title": "Add TUI fuzzy search for saved searches and jobs",
      "priority": "low",
      "tags": [
        "tui",
        "search",
        "ux"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/tui/src/ui/screens/saved_searches.rs",
        "crates/tui/src/ui/screens/jobs.rs",
        "crates/tui/src/action.rs",
        "crates/tui/Cargo.toml"
      ],
      "evidence": [
        "Saved searches screen has NO search or filter capability: handle_saved_searches_input (app.rs:1161-1226) only supports j/k navigation, Enter to run, r to refresh, screen navigation (1-9), q to quit, ? for help",
        "Jobs screen has substring filter (NOT fuzzy) via '/' key: EnterSearchMode action (action.rs:52) triggers filter mode, rebuild_filtered_indices() (app.rs:1863-1905) does substring matching using .contains() on SID and status fields",
        "No fuzzy matcher crate exists in crates/tui/Cargo.toml: dependencies list shows ratatui, crossterm, tokio, serde_json, serde, csv, anyhow, tracing, tracing-subscriber, tracing-appender, uuid - no nucleo-matcher, skim, or similar fuzzy matching library",
        "No fuzzy search action exists in action.rs: EnterSearchMode (line 52) is for substring filter, SearchInput (line 55) for filter input, ClearSearch (line 57) to clear filter - no EnterFuzzySearch or fuzzy-specific actions",
        "Users with many saved searches (100+) must navigate manually through list: no filtering capability means manual j/k navigation through entire list to find specific saved searches",
        "Jobs screen filter is substring-only: rebuild_filtered_indices() (app.rs:1874-1878) uses .contains() matching on job.sid.to_lowercase() and status strings ('done'/'running'), not fuzzy matching with scoring"
      ],
      "plan": [
        "Add nucleo-matcher crate to crates/tui/Cargo.toml (lightweight, actively maintained fuzzy matcher)",
        "Add EnterFuzzySearch mode action to crates/tui/src/action.rs to distinguish from existing EnterSearchMode (substring filter)",
        "Add fuzzy_match_result field and fuzzy_query field to App struct in app.rs to track fuzzy search state and active match",
        "Update handle_saved_searches_input in app.rs: add fuzzy search mode entry (Ctrl+F key), implement fuzzy search popup that filters saved searches by name with score-based ranking, display match results with highlighted text",
        "Update saved_searches.rs render: add fuzzy_match_highlight parameter to render matches with highlighted characters (bold/yellow for matched positions)",
        "Update handle_jobs_input in app.rs: add fuzzy search mode entry (Ctrl+F or reuse '/' with modifier), implement fuzzy search popup for jobs table that matches on SID and status with score display",
        "Update jobs.rs render: add fuzzy_match_results parameter to display fuzzy search results popup with scored matches and highlighted text",
        "Implement fuzzy search results popup in ui/popup.rs: new PopupType::FuzzySearchResults variant with match list, current query display, navigation controls (Enter to select, Esc to cancel)",
        "Add fuzzy search state management: toggle fuzzy mode with Ctrl+F, type query to filter matches in real-time, navigate results with j/k, select with Enter to jump to item",
        "Add tests in crates/tui/tests/app_tests.rs for fuzzy search: test_fuzzy_search_saved_searches (partial match scoring, exact match first), test_fuzzy_search_jobs (SID and status matching), test_fuzzy_search_empty_query (show all items), test_fuzzy_search_no_matches (empty results display)",
        "Update help popup in ui/popup.rs to document 'Ctrl+F: Fuzzy search' shortcut for Saved Searches and Jobs screens",
        "Run make ci to verify all tests pass after fuzzy search implementation"
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-24T21:00:00Z",
      "updated_at": "2026-01-25T23:59:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0097",
      "status": "todo",
      "title": "Add TUI job re-run functionality",
      "priority": "medium",
      "tags": [
        "tui",
        "jobs",
        "ux"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/tui/src/action.rs",
        "crates/tui/src/ui/screens/jobs.rs"
      ],
      "evidence": [
        "TUI Jobs screen can view and cancel/delete jobs but cannot re-run a job",
        "Users must copy SID from TUI, exit to CLI, and run search command with saved query",
        "No 'Re-run job' action or keyboard shortcut exists",
        "Job re-run is a common Splunk workflow for iterating on queries"
      ],
      "plan": [
        "Add ReRunJob(String) action to crates/tui/src/action.rs",
        "Implement re-run by using job's saved search query or extracting query from job details",
        "Add keyboard shortcut (e.g., 'r' key) in Jobs screen to trigger re-run",
        "Add confirmation popup for re-run action with job details summary",
        "Update handle_jobs_input in app.rs to map 'r' key to ReRunJob action when on a job row",
        "Add side_effects handler for ReRunJob (creates new search job with same query)",
        "Add tests for job re-run (valid SID, not found job, re-run success)",
        "Update help popup to document re-run shortcut",
        "Run make ci to verify all tests pass"
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-24T21:00:00Z",
      "updated_at": "2026-01-24T21:00:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0098",
      "status": "todo",
      "title": "Improve CLI search command to support job SID-based queries",
      "priority": "high",
      "tags": [
        "cli",
        "search",
        "jobs"
      ],
      "scope": [
        "crates/cli/src/commands/search.rs",
        "crates/cli/tests/search_tests.rs",
        "crates/cli/src/commands/jobs.rs"
      ],
      "evidence": [
        "CLI search command only takes raw SPL query string",
        "No way to execute search by job SID from CLI (useful for re-running/debugging)",
        "TUI has saved searches but CLI cannot reference saved searches by name",
        "Common workflow: user runs search in TUI, gets SID, wants to reference it later from CLI but cannot"
      ],
      "plan": [
        "Add --job-sid <SID> flag to search command (as alternative to <query>)",
        "If --job-sid provided, retrieve job results using get_search_results(sid, count, offset)",
        "Support both --job-sid and --query (mutually exclusive, or job-sid retrieves existing job results)",
        "Add integration tests for job SID search (valid SID, results loading, error handling)",
        "Update docs/usage.md with --job-sid documentation",
        "Consider synergy with RQ-0096 (re-run saved search that creates job)",
        "Run make ci to verify all tests pass"
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-24T21:00:00Z",
      "updated_at": "2026-01-24T21:00:00Z",
      "depends_on": [],
      "custom_fields": {}
    }
  ]
}