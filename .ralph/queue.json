{
  "version": 1,
  "tasks": [
    {
      "id": "RQ-0418",
      "status": "todo",
      "title": "Add error context to TUI export module error propagation",
      "description": "The export module converts errors to strings without context about what operation was being performed. This makes debugging export failures difficult. Add proper error context using anyhow::Context or thiserror to indicate what was being exported and to where.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "operability",
        "error-handling",
        "tui"
      ],
      "scope": [
        "crates/tui/src/export.rs:29,59-94"
      ],
      "evidence": [
        "export.rs:29: serde_json::to_value(data).map_err(|e| e.to_string())? - no context",
        "export.rs:59: File::create(path).map_err(|e| e.to_string())? - no context",
        "Lines 64-94: Similar patterns for CSV operations",
        "Error message gives no indication of: what format, what file, what data type"
      ],
      "plan": [
        "Add context to JSON serialization: .context('Failed to serialize export data')",
        "Add context to file creation: .with_context(|| format!('Failed to create export file: {}', path.display()))",
        "Add context to CSV operations with format and path info",
        "Use anyhow::Context for rich error messages",
        "Verify by running `make ci` and testing error scenarios"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0419",
      "status": "todo",
      "title": "Fix swallowed errors in TUI export serialization",
      "description": "The export module silently ignores serialization errors using .ok() on Result types. When export data fails to serialize, the operation silently produces no output without indicating an error to the user. Replace with proper error handling.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "reliability",
        "error-handling",
        "tui"
      ],
      "scope": [
        "crates/tui/src/app/export.rs:127-215"
      ],
      "evidence": [
        "export.rs:127-128: serde_json::to_value(v).ok() - error swallowed",
        "Pattern repeated for: Indexes, Roles, Apps, SavedSearches, Macros, ClusterInfo, Jobs, Health, License, Kvstore, InternalLogs, Overview, SearchPeers, FiredAlerts, Forwarders, Lookups, ShcStatus",
        "When serialization fails, user gets empty export with no error indication"
      ],
      "plan": [
        "Replace .ok() with proper error propagation using ? operator",
        "Change return type to Result<Option<Value>, String>",
        "Map serialization errors to user-friendly messages",
        "Add toast notification on export failure",
        "Verify by running `make ci` and testing export error scenarios"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0420",
      "status": "todo",
      "title": "Consolidate duplicate load_fixture test helper functions",
      "description": "The load_fixture() function is duplicated between client and TUI test modules with slightly different path resolution logic. Changes to fixture loading need to be made in multiple places. Create a shared test utility or have TUI re-export from client.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "dry",
        "testing"
      ],
      "scope": [
        "crates/client/tests/common/mod.rs:26-34",
        "crates/tui/tests/common/mod.rs:32-44"
      ],
      "evidence": [
        "client/tests/common/mod.rs: load_fixture() with manifest_dir.join('fixtures')",
        "tui/tests/common/mod.rs: load_fixture() with manifest_dir.parent().join('client').join('fixtures')",
        "Functions are 95% identical but use different fixture path resolution",
        "Any changes to fixture format require updates in both places"
      ],
      "plan": [
        "Create shared test-util crate or re-export pattern",
        "Have TUI tests use client's load_fixture via re-export",
        "Or extract common code into a shared module",
        "Update all test imports to use shared version",
        "Verify by running `make test-integration`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0421",
      "status": "todo",
      "title": "Fix swallowed CLI input errors in config command",
      "description": "The config command uses .ok() on interactive input results, silently ignoring errors from dialoguer prompts. If input fails (e.g., terminal doesn't support interactive input), the command silently continues with None values instead of reporting the error.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "reliability",
        "error-handling",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/config.rs:242,509,521,562,575"
      ],
      "evidence": [
        "config.rs:242: lock.read_line(&mut line).ok().and_then(...) - error swallowed",
        "config.rs:509: Ok(input.interact().ok()) - dialoguer error ignored",
        "config.rs:521: Ok(input.interact().ok().filter(...)) - error ignored",
        "config.rs:562: Ok(confirm.interact().ok()) - error ignored",
        "config.rs:575: Ok(input.interact().ok()) - error ignored"
      ],
      "plan": [
        "Replace .ok() with proper error propagation",
        "Add context about what input was being requested",
        "Use anyhow::Context for rich error messages",
        "Ensure non-interactive environments get clear error messages",
        "Verify by running `make ci` and testing with piped input"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0422",
      "status": "todo",
      "title": "Store abort handles for spawned TUI tasks to prevent resource leaks",
      "description": "The TUI side effect handlers spawn 50+ tokio tasks without storing abort handles. On application shutdown, these tasks may continue running unnecessarily. Store handles and abort them during graceful shutdown.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "resource-management",
        "async",
        "tui"
      ],
      "scope": [
        "crates/tui/src/runtime/side_effects/mod.rs",
        "crates/tui/src/runtime/side_effects/*.rs",
        "crates/tui/src/main.rs:116,243"
      ],
      "evidence": [
        "side_effects/*.rs: tokio::spawn() called without storing JoinHandle",
        "21+ handler modules spawn tasks for async operations",
        "Jobs, searches, apps, users, cluster handlers all spawn tasks",
        "No graceful shutdown mechanism for in-flight requests"
      ],
      "plan": [
        "Create task tracker to store abort handles",
        "Add AbortHandle storage to side effect context",
        "Implement graceful shutdown that aborts pending tasks",
        "Ensure cancellation is handled properly in spawned tasks",
        "Verify by running `make ci` and testing shutdown behavior"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0423",
      "status": "todo",
      "title": "Add missing error path tests for core client modules",
      "description": "Several core client modules only test happy paths and missing error scenarios. Add tests for: 404 not found, 403 permission denied, malformed responses, network timeouts, and invalid input validation.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "testing",
        "reliability",
        "client"
      ],
      "scope": [
        "crates/client/tests/apps_tests.rs",
        "crates/client/tests/indexes_tests.rs",
        "crates/client/tests/inputs_tests.rs",
        "crates/client/tests/forwarders_tests.rs",
        "crates/client/tests/lookups_tests.rs"
      ],
      "evidence": [
        "apps_tests.rs: 7 tests, all success paths - missing 404, 403, malformed data",
        "indexes_tests.rs: missing invalid index name, creation failures, permission errors",
        "inputs_tests.rs: missing invalid input path, enable/disable failures",
        "forwarders_tests.rs: missing connection errors, invalid forwarder data",
        "lookups_tests.rs: missing lookup not found, definition errors",
        "error_tests.rs shows good patterns to follow for error path testing"
      ],
      "plan": [
        "Add test_unauthorized_access tests to each module",
        "Add test_not_found tests for missing resources",
        "Add test_malformed_response tests",
        "Add test_timeout_handling tests",
        "Follow patterns from error_tests.rs and retry_*_tests.rs",
        "Verify by running `make test-integration`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0424",
      "status": "todo",
      "title": "Fix inefficient string allocation in encode_stanza_name function",
      "description": "The encode_stanza_name function allocates a new String for every character when encoding special characters. For large stanza names, this causes O(n²) allocation behavior. Pre-allocate capacity and use more efficient encoding.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "performance",
        "client"
      ],
      "scope": [
        "crates/client/src/endpoints/configs.rs:227-264"
      ],
      "evidence": [
        "configs.rs:227-264: encode_stanza_name allocates per character",
        "Pattern: result.push('%'); result.push(hex1); result.push(hex2); - 3 allocations per special char",
        "Called frequently for config stanza operations",
        "O(n²) behavior for strings with many special characters"
      ],
      "plan": [
        "Pre-allocate String with input capacity: String::with_capacity(name.len() * 3)",
        "Use write! macro or push_str for hex digits instead of individual push",
        "Consider using percent-encoding crate for standard encoding",
        "Add benchmark to verify performance improvement",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0425",
      "status": "todo",
      "title": "Extract hardcoded magic constants to named constants",
      "description": "Multiple modules contain hardcoded magic numbers for timeouts, intervals, limits, and UI dimensions. These should be centralized as named constants for maintainability and consistency.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "dry",
        "configuration",
        "tui",
        "cli"
      ],
      "scope": [
        "crates/tui/src/ui/toast.rs:47-48,127",
        "crates/tui/src/app/input/search.rs:24",
        "crates/cli/src/commands/logs.rs:141,246",
        "crates/tui/src/ui/popup/mod.rs:15-16",
        "crates/tui/src/app/state.rs:42-43"
      ],
      "evidence": [
        "toast.rs:47-48: Duration::from_secs(5), Duration::from_secs(10) - toast TTLs",
        "toast.rs:127: MAX_TOASTS = 5 - hardcoded limit",
        "search.rs:24: VALIDATION_DEBOUNCE_MS = 500 - debounce timing",
        "logs.rs:141: Duration::from_secs(2) - tail poll interval",
        "logs.rs:246: default_value = '-15m' - default time range",
        "popup/mod.rs:15-16: 60%, 50% - popup dimensions",
        "state.rs:42-43: 3, 1 - header/footer heights"
      ],
      "plan": [
        "Define constants in appropriate config or constants modules",
        "TOAST_TTL_SHORT, TOAST_TTL_LONG, MAX_TOASTS",
        "VALIDATION_DEBOUNCE_MS, TAIL_POLL_INTERVAL",
        "DEFAULT_TIME_RANGE, POPUP_WIDTH_PERCENT, POPUP_HEIGHT_PERCENT",
        "HEADER_HEIGHT, FOOTER_HEIGHT",
        "Replace all hardcoded values with named constants",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-08T01:18:11Z",
      "updated_at": "2026-02-08T01:18:11Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0398",
      "status": "todo",
      "title": "Convert stringly-typed model fields to proper enums",
      "description": "Multiple model files use String types for fields that have a fixed set of valid values. This makes bugs harder to prevent and reduces type safety. Create proper enums for status fields, severity levels, log levels, and other categorical data.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "type-safety",
        "refactoring",
        "client"
      ],
      "scope": [
        "crates/client/src/models/alerts.rs",
        "crates/client/src/models/cluster.rs",
        "crates/client/src/models/inputs.rs",
        "crates/client/src/models/server.rs",
        "crates/client/src/models/logs.rs",
        "crates/client/src/models/license.rs"
      ],
      "evidence": [
        "alerts.rs: severity: Option<String> - should be Severity enum",
        "cluster.rs: mode: String, status: String - should be ClusterMode, PeerStatus enums",
        "inputs.rs: input_type: String - should be InputType enum",
        "server.rs: health: String, status: String - should be HealthStatus enum",
        "logs.rs: log_level: String - should be LogLevel enum",
        "license.rs: license_type: String - should be LicenseType enum"
      ],
      "plan": [
        "Define enums for each categorical field type",
        "Implement Serialize/Deserialize for each enum",
        "Update model structs to use new enum types",
        "Update formatters and UI code to handle enums",
        "Add tests for serialization/deserialization",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0399",
      "status": "todo",
      "title": "Fix inconsistent empty/null value rendering across formatters",
      "description": "Empty optional values are rendered inconsistently across output formats. Table formatters use 'N/A' for missing values, while XML formatters use empty strings. This inconsistency could confuse users parsing output programmatically. Standardize on a single representation for missing values across all formatters.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "consistency",
        "formatters",
        "cli"
      ],
      "scope": [
        "crates/cli/src/formatters/table/*.rs",
        "crates/cli/src/formatters/xml/*.rs",
        "crates/cli/src/formatters/csv/*.rs"
      ],
      "evidence": [
        "Table formatters use 'N/A': indexes.rs:32,38-41, forwarders.rs:32-35, jobs.rs:68-77",
        "XML formatter uses empty strings: xml/mod.rs:536,580 (unwrap_or(''))",
        "Same data renders differently depending on output format",
        "No documented standard for representing missing values"
      ],
      "plan": [
        "Decide on standard representation for missing values (recommend 'N/A' or empty string consistently)",
        "Update all formatters to use the same representation",
        "Document the standard in formatter module documentation",
        "Update tests to verify consistent behavior",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0400",
      "status": "todo",
      "title": "Update documentation to match actual CLI implementation",
      "description": "README.md and docs/usage.md contain outdated command syntax that doesn't match the actual implementation. The docs show deprecated flat-flag syntax (e.g., 'indexes --detailed') but the actual CLI uses subcommands ('indexes list --detailed'). Additionally, many subcommands like 'indexes create/delete', 'cluster peers', and 'saved-searches create/delete' are not documented at all.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "documentation",
        "consistency",
        "ux"
      ],
      "scope": [
        "README.md",
        "docs/usage.md",
        "docs/user-guide.md"
      ],
      "evidence": [
        "README.md lines 96-99: 'splunk-cli indexes --detailed' should be 'splunk-cli indexes list --detailed'",
        "docs/usage.md lines 536-543: Same deprecated syntax",
        "Missing docs for: indexes create/modify/delete",
        "Missing docs for: cluster peers/maintenance/rebalance",
        "Missing docs for: saved-searches create/delete/enable/disable",
        "Missing env var: SPLUNK_HEALTH_CHECK_INTERVAL in docs table"
      ],
      "plan": [
        "Update README.md with correct command syntax",
        "Update docs/usage.md with all supported subcommands",
        "Add missing environment variable documentation",
        "Run `make generate` to regenerate keybinding docs",
        "Run `make lint-docs` to verify docs are in sync",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0401",
      "status": "todo",
      "title": "Replace hardcoded page size values in TUI side effects with constants",
      "description": "TUI side effect handlers use hardcoded page size values of 100 instead of referencing DEFAULT_LIST_PAGE_SIZE from the constants module. This creates inconsistency between TUI and the centralized configuration and makes it harder to change the default globally.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "dry",
        "configuration",
        "tui"
      ],
      "scope": [
        "crates/tui/src/runtime/side_effects/jobs.rs",
        "crates/tui/src/runtime/side_effects/indexes.rs",
        "crates/tui/src/runtime/side_effects/apps.rs",
        "crates/tui/src/runtime/side_effects/*.rs"
      ],
      "evidence": [
        "jobs.rs:59,92,148,192 - count: 100 (hardcoded)",
        "indexes.rs:71,111,146 - count: 100 (hardcoded)",
        "apps.rs:60,93,126,159 - count: 100 (hardcoded)",
        "DEFAULT_LIST_PAGE_SIZE = 100 exists in crates/config/src/constants.rs:79"
      ],
      "plan": [
        "Import DEFAULT_LIST_PAGE_SIZE from config crate in side effect modules",
        "Replace all hardcoded 'count: 100' with 'count: DEFAULT_LIST_PAGE_SIZE'",
        "Check for other hardcoded pagination values in side effects",
        "Verify by running `make ci` and `make test-unit`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0402",
      "status": "todo",
      "title": "Fix dangerous as i32 cast in serde_helpers.rs that truncates floats",
      "description": "The StringOrNumber deserialization helper uses `as i32` to convert f64 to i32, which silently truncates decimal values. This can lead to data loss and unexpected behavior. Replace with proper error handling using try_from or explicit rounding.",
      "priority": "medium",
      "tags": [
        "maintenance",
        "type-safety",
        "correctness",
        "client"
      ],
      "scope": [
        "crates/client/src/serde_helpers.rs"
      ],
      "evidence": [
        "Line 71: Some(StringOrNumber::F64(v)) => Ok(Some(v as i32))",
        "Silent truncation of floating-point values",
        "Should use try_from or proper error handling"
      ],
      "plan": [
        "Replace 'v as i32' with i32::try_from(v as i64)",
        "Add proper error handling for out-of-range values",
        "Add test cases for float truncation edge cases",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0403",
      "status": "todo",
      "title": "Add debug logging to CLI dispatch module",
      "description": "The dispatch module (crates/cli/src/dispatch.rs) routes all CLI commands but has zero logging. This makes it difficult to debug command routing issues and understand execution flow. Add appropriate trace/debug logging for command routing decisions.",
      "priority": "low",
      "tags": [
        "maintenance",
        "operability",
        "logging",
        "cli"
      ],
      "scope": [
        "crates/cli/src/dispatch.rs"
      ],
      "evidence": [
        "dispatch.rs has no info!, debug!, or trace! statements",
        "Command routing decisions are invisible in logs",
        "Makes debugging routing issues difficult"
      ],
      "plan": [
        "Add trace! logging for each command dispatch path",
        "Add debug! logging for command execution start/completion",
        "Follow existing logging patterns from other modules",
        "Verify by running CLI with RUST_LOG=debug and checking output"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0404",
      "status": "todo",
      "title": "Unify serde naming convention (camelCase vs snake_case)",
      "description": "Model files use inconsistent naming conventions in serde rename attributes. Some fields use camelCase (isDone, maxTotalDataSizeMB) while others use snake_case (is_configured, is_captain). This inconsistency should be standardized, preferably using the Splunk API's native naming (camelCase) consistently.",
      "priority": "low",
      "tags": [
        "maintenance",
        "consistency",
        "serialization",
        "client"
      ],
      "scope": [
        "crates/client/src/models/*.rs"
      ],
      "evidence": [
        "jobs.rs: isDone (camelCase)",
        "apps.rs: is_configured (snake_case)",
        "cluster.rs: is_captain (snake_case)",
        "indexes.rs: maxTotalDataSizeMB (camelCase)",
        "Mixed conventions within same model files"
      ],
      "plan": [
        "Document the naming convention standard (match Splunk API)",
        "Audit all model files for naming consistency",
        "Update inconsistent rename attributes",
        "Verify serialization tests still pass",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0405",
      "status": "todo",
      "title": "Add user feedback for silent parse failures in popup handlers",
      "description": "Profile popup handlers silently ignore parse failures when users enter invalid values. For example, when parsing timeout values, if parse fails, the code does nothing (empty match arm). Users get no feedback that their input was invalid. Add error feedback or validation.",
      "priority": "low",
      "tags": [
        "maintenance",
        "ux",
        "error-handling",
        "tui"
      ],
      "scope": [
        "crates/tui/src/app/popups/profile.rs",
        "crates/tui/src/app/popups/*.rs"
      ],
      "evidence": [
        "profile.rs: Err(_) => {} // Silent parse failure",
        "Multiple field update handlers ignore parse errors",
        "User enters invalid value, sees no feedback",
        "Fields may appear to accept input but don't change"
      ],
      "plan": [
        "Add toast notifications for parse failures",
        "Show inline validation errors in popup fields",
        "Consider preventing invalid input at input handling level",
        "Verify by running TUI and testing invalid input"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0406",
      "status": "todo",
      "title": "Create shared output writing helper for CLI commands",
      "description": "The output writing pattern is duplicated across 40+ locations in CLI command files. Each command repeats the same logic for writing to file vs stdout with error handling. Create a unified helper function like `output_result(formatter, format, output_file)` to eliminate this duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/*.rs",
        "crates/cli/src/formatters/mod.rs"
      ],
      "evidence": [
        "Pattern repeated 40+ times across command files:",
        "if let Some(ref path) = output_file {",
        "    write_to_file(&output, path)",
        "        .with_context(|| format!(\"Failed to write output to {}\", path.display()))?;",
        "    eprintln!(\"Results written to {} ({:?} format)\", path.display(), format);",
        "} else { print!(\"{}\", output); }"
      ],
      "plan": [
        "Add output_result() helper to formatters module",
        "Helper should handle both file and stdout output",
        "Include proper error context and user feedback",
        "Refactor all command files to use the helper",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0407",
      "status": "todo",
      "title": "Fix hardcoded timeout in overview_fetch.rs to use FETCH_TIMEOUT constant",
      "description": "The overview_fetch.rs file has a hardcoded 30-second timeout in an error message instead of using the FETCH_TIMEOUT constant defined at the top of the file. This creates inconsistency if the constant is changed but the error message isn't updated.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "configuration",
        "tui"
      ],
      "scope": [
        "crates/tui/src/runtime/side_effects/overview_fetch.rs"
      ],
      "evidence": [
        "Line 21: const FETCH_TIMEOUT: Duration = Duration::from_secs(30);",
        "Line 222: let error = ClientError::Timeout(std::time::Duration::from_secs(30));",
        "Hardcoded value should reference FETCH_TIMEOUT constant"
      ],
      "plan": [
        "Replace Duration::from_secs(30) with FETCH_TIMEOUT",
        "Check for other hardcoded timeouts in side effects",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0408",
      "status": "todo",
      "title": "Standardize warn! message patterns across CLI commands",
      "description": "Some warn! calls in CLI commands don't follow the AGENTS.md specified pattern of 'Failed to {action}'. While many commands use the correct pattern, some variations exist. Standardize all warning messages to follow the documented pattern.",
      "priority": "low",
      "tags": [
        "maintenance",
        "consistency",
        "logging",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/cluster.rs",
        "crates/cli/src/commands/shc.rs",
        "crates/cli/src/commands/health.rs"
      ],
      "evidence": [
        "cluster.rs:179 - warn!(\"Failed to fetch cluster peers: {}\", e) - correct",
        "shc.rs:175 - warn!(\"Failed to fetch SHC members: {}\", e) - correct",
        "health.rs:43 - warn!(\"Failed to fetch {}: {}\", endpoint, err) - correct",
        "Most warnings actually follow the pattern - this is a verification/audit task"
      ],
      "plan": [
        "Audit all warn! calls in CLI command files",
        "Update any that don't follow 'Failed to {action}' pattern",
        "Add comment in AGENTS.md if additional patterns are acceptable",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0409",
      "status": "todo",
      "title": "Create macro or wrapper for tokio::select! cancellation pattern",
      "description": "The tokio::select! cancellation pattern is repeated 60+ times across CLI command files with nearly identical code. This pattern combines an API call with a cancellation token check. Create a macro or wrapper function to handle this consistently and reduce code duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/jobs.rs",
        "crates/cli/src/commands/cluster.rs",
        "crates/cli/src/commands/license.rs",
        "crates/cli/src/commands/*.rs"
      ],
      "evidence": [
        "Pattern repeated 60+ times:",
        "let result = tokio::select! {",
        "    res = client.some_api_call() => res?,",
        "    _ = cancel.cancelled() => return Err(Cancelled.into()),",
        "};"
      ],
      "plan": [
        "Create a macro like retry_call! for cancellation handling",
        "Or create a wrapper function that takes a future and cancellation token",
        "Refactor all 60+ occurrences to use the new abstraction",
        "Ensure the abstraction preserves error types correctly",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0410",
      "status": "todo",
      "title": "Create shared form parameter builder for endpoint modules",
      "description": "Endpoint modules repeat the same pattern for building form parameters with repetitive if let Some() blocks. This pattern appears 20+ times across endpoint files with slight variations. Create a macro or builder pattern to reduce this duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "client"
      ],
      "scope": [
        "crates/client/src/endpoints/indexes.rs",
        "crates/client/src/endpoints/users.rs",
        "crates/client/src/endpoints/roles.rs"
      ],
      "evidence": [
        "Pattern repeated with slight variations:",
        "if let Some(max_data_size) = params.max_data_size_mb {",
        "    form_params.push(('maxTotalDataSizeMB'.to_string(), max_data_size.to_string()));",
        "}",
        "Duplicated within indexes.rs at lines 70-96 and 153-179"
      ],
      "plan": [
        "Create a macro or helper for form parameter construction",
        "Helper should handle Option<T> to form param conversion",
        "Handle serde rename attribute lookup automatically if possible",
        "Refactor endpoint files to use the helper",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0411",
      "status": "todo",
      "title": "Fix timestamp formatting in error_details.rs to use proper time formatting",
      "description": "The error_details.rs file uses format!(\"{:?}\", std::time::SystemTime::now()) for timestamp serialization, which produces a Debug representation instead of a properly formatted timestamp. Replace with chrono for consistent, readable timestamps.",
      "priority": "low",
      "tags": [
        "maintenance",
        "type-safety",
        "operability",
        "tui"
      ],
      "scope": [
        "crates/tui/src/error_details.rs"
      ],
      "evidence": [
        "Line 45: timestamp: format!(\"{:?}\", std::time::SystemTime::now())",
        "Uses Debug format instead of proper time formatting",
        "Produces timestamps like 'SystemTime { tv_sec: 1234567890, tv_nsec: 123456789 }'",
        "Should use ISO 8601 or RFC 3339 format"
      ],
      "plan": [
        "Replace SystemTime::now() with chrono::Local::now() or chrono::Utc::now()",
        "Use to_rfc3339() or custom format string for readable timestamps",
        "Update any tests that depend on timestamp format",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    }
  ]
}