{
  "version": 1,
  "tasks": [
    {
      "id": "RQ-0403",
      "status": "todo",
      "title": "Add debug logging to CLI dispatch module",
      "description": "The dispatch module (crates/cli/src/dispatch.rs) routes all CLI commands but has zero logging. This makes it difficult to debug command routing issues and understand execution flow. Add appropriate trace/debug logging for command routing decisions.",
      "priority": "low",
      "tags": [
        "maintenance",
        "operability",
        "logging",
        "cli"
      ],
      "scope": [
        "crates/cli/src/dispatch.rs"
      ],
      "evidence": [
        "dispatch.rs has no info!, debug!, or trace! statements",
        "Command routing decisions are invisible in logs",
        "Makes debugging routing issues difficult"
      ],
      "plan": [
        "Add trace! logging for each command dispatch path",
        "Add debug! logging for command execution start/completion",
        "Follow existing logging patterns from other modules",
        "Verify by running CLI with RUST_LOG=debug and checking output"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0404",
      "status": "todo",
      "title": "Unify serde naming convention (camelCase vs snake_case)",
      "description": "Model files use inconsistent naming conventions in serde rename attributes. Some fields use camelCase (isDone, maxTotalDataSizeMB) while others use snake_case (is_configured, is_captain). This inconsistency should be standardized, preferably using the Splunk API's native naming (camelCase) consistently.",
      "priority": "low",
      "tags": [
        "maintenance",
        "consistency",
        "serialization",
        "client"
      ],
      "scope": [
        "crates/client/src/models/*.rs"
      ],
      "evidence": [
        "jobs.rs: isDone (camelCase)",
        "apps.rs: is_configured (snake_case)",
        "cluster.rs: is_captain (snake_case)",
        "indexes.rs: maxTotalDataSizeMB (camelCase)",
        "Mixed conventions within same model files"
      ],
      "plan": [
        "Document the naming convention standard (match Splunk API)",
        "Audit all model files for naming consistency",
        "Update inconsistent rename attributes",
        "Verify serialization tests still pass",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0405",
      "status": "todo",
      "title": "Add user feedback for silent parse failures in popup handlers",
      "description": "Profile popup handlers silently ignore parse failures when users enter invalid values. For example, when parsing timeout values, if parse fails, the code does nothing (empty match arm). Users get no feedback that their input was invalid. Add error feedback or validation.",
      "priority": "low",
      "tags": [
        "maintenance",
        "ux",
        "error-handling",
        "tui"
      ],
      "scope": [
        "crates/tui/src/app/popups/profile.rs",
        "crates/tui/src/app/popups/*.rs"
      ],
      "evidence": [
        "profile.rs: Err(_) => {} // Silent parse failure",
        "Multiple field update handlers ignore parse errors",
        "User enters invalid value, sees no feedback",
        "Fields may appear to accept input but don't change"
      ],
      "plan": [
        "Add toast notifications for parse failures",
        "Show inline validation errors in popup fields",
        "Consider preventing invalid input at input handling level",
        "Verify by running TUI and testing invalid input"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0406",
      "status": "todo",
      "title": "Create shared output writing helper for CLI commands",
      "description": "The output writing pattern is duplicated across 40+ locations in CLI command files. Each command repeats the same logic for writing to file vs stdout with error handling. Create a unified helper function like `output_result(formatter, format, output_file)` to eliminate this duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/*.rs",
        "crates/cli/src/formatters/mod.rs"
      ],
      "evidence": [
        "Pattern repeated 40+ times across command files:",
        "if let Some(ref path) = output_file {",
        "    write_to_file(&output, path)",
        "        .with_context(|| format!(\"Failed to write output to {}\", path.display()))?;",
        "    eprintln!(\"Results written to {} ({:?} format)\", path.display(), format);",
        "} else { print!(\"{}\", output); }"
      ],
      "plan": [
        "Add output_result() helper to formatters module",
        "Helper should handle both file and stdout output",
        "Include proper error context and user feedback",
        "Refactor all command files to use the helper",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0407",
      "status": "todo",
      "title": "Fix hardcoded timeout in overview_fetch.rs to use FETCH_TIMEOUT constant",
      "description": "The overview_fetch.rs file has a hardcoded 30-second timeout in an error message instead of using the FETCH_TIMEOUT constant defined at the top of the file. This creates inconsistency if the constant is changed but the error message isn't updated.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "configuration",
        "tui"
      ],
      "scope": [
        "crates/tui/src/runtime/side_effects/overview_fetch.rs"
      ],
      "evidence": [
        "Line 21: const FETCH_TIMEOUT: Duration = Duration::from_secs(30);",
        "Line 222: let error = ClientError::Timeout(std::time::Duration::from_secs(30));",
        "Hardcoded value should reference FETCH_TIMEOUT constant"
      ],
      "plan": [
        "Replace Duration::from_secs(30) with FETCH_TIMEOUT",
        "Check for other hardcoded timeouts in side effects",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0408",
      "status": "todo",
      "title": "Standardize warn! message patterns across CLI commands",
      "description": "Some warn! calls in CLI commands don't follow the AGENTS.md specified pattern of 'Failed to {action}'. While many commands use the correct pattern, some variations exist. Standardize all warning messages to follow the documented pattern.",
      "priority": "low",
      "tags": [
        "maintenance",
        "consistency",
        "logging",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/cluster.rs",
        "crates/cli/src/commands/shc.rs",
        "crates/cli/src/commands/health.rs"
      ],
      "evidence": [
        "cluster.rs:179 - warn!(\"Failed to fetch cluster peers: {}\", e) - correct",
        "shc.rs:175 - warn!(\"Failed to fetch SHC members: {}\", e) - correct",
        "health.rs:43 - warn!(\"Failed to fetch {}: {}\", endpoint, err) - correct",
        "Most warnings actually follow the pattern - this is a verification/audit task"
      ],
      "plan": [
        "Audit all warn! calls in CLI command files",
        "Update any that don't follow 'Failed to {action}' pattern",
        "Add comment in AGENTS.md if additional patterns are acceptable",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0409",
      "status": "todo",
      "title": "Create macro or wrapper for tokio::select! cancellation pattern",
      "description": "The tokio::select! cancellation pattern is repeated 60+ times across CLI command files with nearly identical code. This pattern combines an API call with a cancellation token check. Create a macro or wrapper function to handle this consistently and reduce code duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "cli"
      ],
      "scope": [
        "crates/cli/src/commands/jobs.rs",
        "crates/cli/src/commands/cluster.rs",
        "crates/cli/src/commands/license.rs",
        "crates/cli/src/commands/*.rs"
      ],
      "evidence": [
        "Pattern repeated 60+ times:",
        "let result = tokio::select! {",
        "    res = client.some_api_call() => res?;",
        "    _ = cancel.cancelled() => return Err(Cancelled.into());",
        "};"
      ],
      "plan": [
        "Create a macro like retry_call! for cancellation handling",
        "Or create a wrapper function that takes a future and cancellation token",
        "Refactor all 60+ occurrences to use the new abstraction",
        "Ensure the abstraction preserves error types correctly",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0410",
      "status": "todo",
      "title": "Create shared form parameter builder for endpoint modules",
      "description": "Endpoint modules repeat the same pattern for building form parameters with repetitive if let Some() blocks. This pattern appears 20+ times across endpoint files with slight variations. Create a macro or builder pattern to reduce this duplication.",
      "priority": "low",
      "tags": [
        "maintenance",
        "dry",
        "refactoring",
        "client"
      ],
      "scope": [
        "crates/client/src/endpoints/indexes.rs",
        "crates/client/src/endpoints/users.rs",
        "crates/client/src/endpoints/roles.rs"
      ],
      "evidence": [
        "Pattern repeated with slight variations:",
        "if let Some(max_data_size) = params.max_data_size_mb {",
        "    form_params.push(('maxTotalDataSizeMB'.to_string(), max_data_size.to_string()));",
        "}",
        "Duplicated within indexes.rs at lines 70-96 and 153-179"
      ],
      "plan": [
        "Create a macro or helper for form parameter construction",
        "Helper should handle Option<T> to form param conversion",
        "Handle serde rename attribute lookup automatically if possible",
        "Refactor endpoint files to use the helper",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    },
    {
      "id": "RQ-0411",
      "status": "todo",
      "title": "Fix timestamp formatting in error_details.rs to use proper time formatting",
      "description": "The error_details.rs file uses format!(\"{:?}\", std::time::SystemTime::now()) for timestamp serialization, which produces a Debug representation instead of a properly formatted timestamp. Replace with chrono for consistent, readable timestamps.",
      "priority": "low",
      "tags": [
        "maintenance",
        "type-safety",
        "operability",
        "tui"
      ],
      "scope": [
        "crates/tui/src/error_details.rs"
      ],
      "evidence": [
        "Line 45: timestamp: format!(\"{:?}\", std::time::SystemTime::now())",
        "Uses Debug format instead of proper time formatting",
        "Produces timestamps like 'SystemTime { tv_sec: 1234567890, tv_nsec: 123456789 }'",
        "Should use ISO 8601 or RFC 3339 format"
      ],
      "plan": [
        "Replace SystemTime::now() with chrono::Local::now() or chrono::Utc::now()",
        "Use to_rfc3339() or custom format string for readable timestamps",
        "Update any tests that depend on timestamp format",
        "Verify by running `make ci`"
      ],
      "notes": [],
      "request": "maintenance scan finding",
      "created_at": "2026-02-07T14:43:17Z",
      "updated_at": "2026-02-07T14:43:17Z",
      "depends_on": [],
      "blocks": [],
      "relates_to": [],
      "custom_fields": {
        "scan_agent": "scan-maintenance"
      }
    }
  ]
}