{
  "version": 1,
  "tasks": [
    {
      "id": "RQ-0024",
      "status": "todo",
      "title": "Implement Splunk server info detection for environment identification",
      "priority": "critical",
      "tags": [
        "client",
        "health",
        "infrastructure"
      ],
      "scope": [
        "crates/client/src/endpoints/",
        "crates/client/src/models.rs",
        "crates/client/src/client.rs"
      ],
      "evidence": [
        "Cluster management endpoints in crates/client/src/endpoints/cluster.rs assume a cluster manager is present.",
        "Splunk health checks require knowing the environment type (standalone, cluster manager, search head, etc.).",
        "/services/server/info provides essential environment metadata."
      ],
      "plan": [
        "Add get_server_info endpoint implementation to fetch /services/server/info.",
        "Define ServerInfo and related models in client/src/models.rs.",
        "Update SplunkClient to use server info for tailoring subsequent health checks and cluster operations."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0025",
      "status": "todo",
      "title": "Implement system-wide health check API client",
      "priority": "high",
      "tags": [
        "client",
        "health"
      ],
      "scope": [
        "crates/client/src/endpoints/",
        "crates/client/src/models.rs"
      ],
      "evidence": [
        "Requested feature: Automated Splunk Health checks.",
        "Splunk provides /services/server/health/splunkd for overall system health monitoring."
      ],
      "plan": [
        "Implement get_health endpoint to fetch health status from /services/server/health/splunkd.",
        "Add structured models for health components and their statuses.",
        "Add integration tests with mock health responses."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0026",
      "status": "todo",
      "title": "Implement license usage monitoring API client",
      "priority": "high",
      "tags": [
        "client",
        "health",
        "license"
      ],
      "scope": [
        "crates/client/src/endpoints/",
        "crates/client/src/models.rs"
      ],
      "evidence": [
        "Requested feature: Automated health checks include license usage monitoring.",
        "License warnings and violations are critical health indicators."
      ],
      "plan": [
        "Implement get_license_usage endpoint to fetch data from /services/license/usage.",
        "Define models for license pools, stacks, and usage metrics.",
        "Verify parsing with integration tests."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0027",
      "status": "todo",
      "title": "Implement KVStore status tracking API client",
      "priority": "medium",
      "tags": [
        "client",
        "health",
        "kvstore"
      ],
      "scope": [
        "crates/client/src/endpoints/",
        "crates/client/src/models.rs"
      ],
      "evidence": [
        "Requested feature: Automated health checks include KVStore status.",
        "KVStore failures impact many Splunk apps and search features."
      ],
      "plan": [
        "Implement get_kvstore_status endpoint to fetch data from /services/kvstore/status.",
        "Define models for KVStore replication and member status.",
        "Add integration tests."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0028",
      "status": "todo",
      "title": "Implement automated log parsing error search",
      "priority": "high",
      "tags": [
        "client",
        "health",
        "search"
      ],
      "scope": [
        "crates/client/src/client.rs",
        "crates/client/src/models.rs"
      ],
      "evidence": [
        "Requested feature: Log source parsing checks.",
        "Parsing errors are typically logged in _internal with specific components like TuningParser or DateParserVerbose."
      ],
      "plan": [
        "Define a specialized search query for identifying parsing errors in _internal logs.",
        "Implement a convenience method in SplunkClient to run this health search and parse results.",
        "Add models to represent identified parsing issues (source, sourcetype, error message)."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0031",
      "status": "todo",
      "title": "Implement splunk health CLI command",
      "priority": "medium",
      "tags": [
        "cli",
        "health"
      ],
      "scope": [
        "crates/cli/src/main.rs",
        "crates/cli/src/commands/health.rs"
      ],
      "evidence": [
        "Requested feature: Automated health checks should be available via CLI for automation.",
        "Existing CLI structure supports subcommands for specific resources."
      ],
      "plan": [
        "Add health subcommand to crates/cli/src/main.rs.",
        "Implement crates/cli/src/commands/health.rs to aggregate and display health data in various formats (JSON, Table).",
        "Ensure it handles both standalone and distributed environments gracefully."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [
        "RQ-0024"
      ],
      "custom_fields": {}
    },
    {
      "id": "RQ-0029",
      "status": "todo",
      "title": "Refactor TUI screens from app.rs into ui/screens",
      "priority": "medium",
      "tags": [
        "tui",
        "refactor",
        "ui"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/tui/src/ui/screens/"
      ],
      "evidence": [
        "crates/tui/src/app.rs contains rendering logic for Search, Indexes, and Cluster screens, making it overly large.",
        "Jobs and JobDetails screens are already correctly separated into crates/tui/src/ui/screens/."
      ],
      "plan": [
        "Move render_search to crates/tui/src/ui/screens/search.rs.",
        "Move render_indexes to crates/tui/src/ui/screens/indexes.rs.",
        "Move render_cluster to crates/tui/src/ui/screens/cluster.rs.",
        "Update app.rs to call these new modules, maintaining clean state separation."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0030",
      "status": "todo",
      "title": "Create dedicated Health Check TUI screen",
      "priority": "medium",
      "tags": [
        "tui",
        "health",
        "ui"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/tui/src/ui/screens/health.rs"
      ],
      "evidence": [
        "Requested feature: Automated health check feature in the TUI.",
        "Users need a centralized view for monitoring environment health."
      ],
      "plan": [
        "Add Health variant to CurrentScreen enum in app.rs.",
        "Implement ui/screens/health.rs to display metrics (system health, license, KVStore, parsing errors).",
        "Add navigation to the new screen (Key '5') and update help documentation."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [
        "RQ-0025",
        "RQ-0026",
        "RQ-0027",
        "RQ-0028"
      ],
      "custom_fields": {}
    },
    {
      "id": "RQ-0037",
      "status": "todo",
      "title": "Implement background health monitoring with status indicator",
      "priority": "medium",
      "tags": [
        "tui",
        "health",
        "ux"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/tui/src/main.rs"
      ],
      "evidence": [
        "Health issues in Splunk may arise while the user is on other screens.",
        "Proactive notification of health changes improves operational awareness."
      ],
      "plan": [
        "Add a periodic background task in main.rs to fetch health status using the client.",
        "Introduce a health status indicator (e.g., colored symbol) in the TUI header.",
        "Show a toast notification if health status transitions from healthy to unhealthy."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [
        "RQ-0025"
      ],
      "custom_fields": {}
    },
    {
      "id": "RQ-0032",
      "status": "todo",
      "title": "Implement multi-profile configuration support",
      "priority": "high",
      "tags": [
        "config",
        "ux",
        "multi-profile"
      ],
      "scope": [
        "crates/config/src/"
      ],
      "evidence": [
        "Current configuration in crates/config/src/loader.rs is heavily reliant on environment variables.",
        "No simple mechanism exists to switch between multiple Splunk environments (e.g., dev vs prod)."
      ],
      "plan": [
        "Define a configuration file structure (e.g., config.json or config.toml) that supports multiple named profiles.",
        "Update ConfigLoader to read from standard locations (~/.config/splunk-tui/config.json).",
        "Add logic to select the active profile via environment variable or CLI flag."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0033",
      "status": "todo",
      "title": "Optimize search result formatting cache in TUI",
      "priority": "medium",
      "tags": [
        "tui",
        "performance",
        "ux"
      ],
      "scope": [
        "crates/tui/src/app.rs"
      ],
      "evidence": [
        "crates/tui/src/app.rs:608 calls serde_json::to_string_pretty() on every frame for visible search results.",
        "This causes unnecessary CPU load and can impact scroll smoothness for large result sets."
      ],
      "plan": [
        "Add a search results cache (e.g., Vec<String>) to App state to store pre-formatted JSON strings.",
        "Update the cache only when new results are loaded.",
        "Modify render_search to use the cached strings."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0036",
      "status": "todo",
      "title": "Implement search query history in TUI",
      "priority": "medium",
      "tags": [
        "tui",
        "ux",
        "search"
      ],
      "scope": [
        "crates/tui/src/app.rs",
        "crates/config/src/persistence.rs"
      ],
      "evidence": [
        "Users frequently reuse or slightly modify previous search queries.",
        "Current search screen does not persist or provide access to previous queries beyond the last one."
      ],
      "plan": [
        "Add a search_history: Vec<String> field to PersistedState.",
        "Capture queries on successful search execution and store them in history (with a size limit).",
        "Add a TUI mechanism (e.g., a popup or up/down arrows in search field) to browse and select from history."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0034",
      "status": "todo",
      "title": "Add mouse support to TUI for navigation and selection",
      "priority": "medium",
      "tags": [
        "tui",
        "ux",
        "mouse"
      ],
      "scope": [
        "crates/tui/src/main.rs",
        "crates/tui/src/app.rs"
      ],
      "evidence": [
        "TUI is currently keyboard-only, which can be less efficient for some users.",
        "Ratatui supports mouse events, but they are not enabled or handled in the current implementation."
      ],
      "plan": [
        "Enable mouse capture in crates/tui/src/main.rs using crossterm.",
        "Handle MouseEvent in App::handle_input.",
        "Implement clicking on tab headers to switch screens and clicking list/table items for selection."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0035",
      "status": "todo",
      "title": "Enhance CLI error reporting with request IDs and URIs",
      "priority": "low",
      "tags": [
        "cli",
        "client",
        "dx"
      ],
      "scope": [
        "crates/client/src/error.rs",
        "crates/client/src/endpoints/request.rs"
      ],
      "evidence": [
        "Current ApiError in crates/client/src/error.rs only captures status and message.",
        "Troubleshooting Splunk API issues is difficult without the request ID (X-Splunk-Request-Id) and the specific URI that failed."
      ],
      "plan": [
        "Expand ClientError::ApiError to include url and request_id fields.",
        "Update send_request_with_retry in request.rs to extract these details from the response and headers on failure.",
        "Update CLI formatters to display these details when an error occurs."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0038",
      "status": "todo",
      "title": "Implement make release target for optimized builds",
      "priority": "high",
      "tags": [
        "workflow",
        "makefile",
        "build"
      ],
      "scope": [
        "Makefile"
      ],
      "evidence": [
        "The Makefile lacks a standard release target that produces fully optimized, stripped binaries.",
        "Current build target installs release binaries to ~/.local/bin but may not be optimized for maximum performance or minimum size."
      ],
      "plan": [
        "Add a release target to the Makefile that runs cargo build --release with LTO and symbols stripped.",
        "Ensure it also handles installation of the optimized binaries.",
        "Update CI target to use release builds where appropriate."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0039",
      "status": "todo",
      "title": "Add comprehensive linting and formatting enforcement to CI",
      "priority": "low",
      "tags": [
        "workflow",
        "ci",
        "quality"
      ],
      "scope": [
        "Makefile"
      ],
      "evidence": [
        "AGENTS.md requires make ci to catch ALL potential issues.",
        "Makefile's lint target currently runs only cargo clippy without strict settings."
      ],
      "plan": [
        "Update make lint to include cargo clippy -- -D warnings and cargo fmt --check.",
        "Ensure all crates adhere to the project's formatting standards.",
        "Add clippy to the CI pipeline to block regressions."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    },
    {
      "id": "RQ-0040",
      "status": "todo",
      "title": "Add user documentation guide for TUI and CLI",
      "priority": "low",
      "tags": [
        "docs",
        "ux"
      ],
      "scope": [
        "docs/user-guide.md",
        "README.md"
      ],
      "evidence": [
        "The project lacks a comprehensive guide for users to discover TUI shortcuts and CLI advanced usage.",
        "README.md is basic and does not cover all available features."
      ],
      "plan": [
        "Create docs/user-guide.md with sections for TUI navigation, shortcuts, search syntax, and CLI command examples.",
        "Link to the guide from README.md.",
        "Include a troubleshooting section with common API error explanations."
      ],
      "notes": [],
      "request": "scan finding",
      "created_at": "2026-01-20T17:15:00Z",
      "updated_at": "2026-01-20T17:15:00Z",
      "depends_on": [],
      "custom_fields": {}
    }
  ]
}